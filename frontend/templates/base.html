<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ name }}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<!-- CV Modal -->
<div id="cv-modal" class="cv-modal">
    <div class="cv-modal-content">
        <span class="cv-close">&times;</span>
        <h2>Request CV</h2>
        <p>CV is available upon request. Kindly fill the form.</p>

        <form action="https://formsubmit.co/rittikpanda24@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">

            <label>Your Email</label>
            <input type="email" name="Email" required>

            <label>Purpose</label>
            <textarea name="message" rows="4" required></textarea>

            <button type="submit">Send Request</button>
        </form>
    </div>
</div>

<body>
    <header class="site-header">
        <nav class="nav container">
            <a href="{{ url_for('about') }}" class="{% if request.endpoint == 'about' %}nav-active{% endif %}">About</a>
            <a href="{{ url_for('research') }}" class="{% if request.endpoint == 'research' %}nav-active{% endif %}">Research</a>
            <a href="{{ url_for('blogs') }}" class="{% if request.endpoint == 'blogs' %}nav-active{% endif %}">Blogs</a>
    
            <button id="theme-toggle" class="theme-toggle">üåô</button>
        </nav>
    </header>

    <main class="container">
        {% block main %}{% endblock %}
    </main>

    <!-- <footer class="site-footer">
        <p>Template inspired by academic personal pages.</p>
    </footer> -->

    <!-- FIXED SCRIPT (only change) -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const toggleBtn = document.getElementById("theme-toggle");
            const body = document.body;

            // Load saved theme
            if (localStorage.getItem("theme") === "dark") {
                body.classList.add("dark-mode");
                toggleBtn.textContent = "‚òÄÔ∏è";
            }

            toggleBtn.addEventListener("click", () => {
                body.classList.toggle("dark-mode");

                if (body.classList.contains("dark-mode")) {
                    localStorage.setItem("theme", "dark");
                    toggleBtn.textContent = "‚òÄÔ∏è";
                } else {
                    localStorage.setItem("theme", "light");
                    toggleBtn.textContent = "üåô";
                }
            });

        });
        // CV Modal Logic
        const cvLink = document.querySelector("a[href='#']");
        const modal = document.getElementById("cv-modal");
        const closeBtn = document.querySelector(".cv-close");

        cvLink.addEventListener("click", function(e) {
            e.preventDefault();
            modal.style.display = "flex";
        });

        closeBtn.addEventListener("click", function() {
            modal.style.display = "none";
        });

        window.addEventListener("click", function(e) {
            if (e.target === modal) {
                modal.style.display = "none";
            }
        });
    </script>

</body>
</html>
